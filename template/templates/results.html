<style>
.bullet { font: 10px sans-serif; }
.bullet .marker { stroke: #000; stroke-width: 0px; }
.bullet .tick line { stroke: #666; stroke-width: .5px; }
.bullet .range.s0 { fill: #eee; }
.bullet .range.s1 { fill: #ddd; }
.bullet .range.s2 { fill: #ccc; }
.bullet .measure.s0 { fill: lightsteelblue; }
.bullet .measure.s1 { fill: steelblue; }
.bullet .title { font-size: 14px; font-weight: bold; }
.bullet .subtitle { fill: #999; }
</style>
<script src="/templates/d3.v3.min.js"></script>
<script src="/templates/bullet.js"></script>

<!-- Template for the results page -->
<h2 id="resultTitle" class="bolded-blue">You are an advanced internet user!</h2>

<div class="results-explanation">
	{{#each resultsExplanation}}
		<p>{{this}}</p>
	{{/each}}
</div>

<div id="viz" style="overflow: scroll;"></div>

<div class="citations">
	{{#each citations}}
		<p>{{this}}</p>
	{{/each}}
</div>

<script>

function setvalues(d) {
	if(d.title == "Overall") {
		d.ranges = [4];
	  d.measures = [2];
	} else if(d.title == "Low Complexity Websites") {
		d.ranges = [4];
		d.measures = [1];
	} else if(d.title == "Medium Complexity Websites") {
		d.ranges = [5];
		d.measures = [5];
	} else {
		d.ranges = [6];
		d.measures = [7];
	}
  return d;
}

var margin = {top: 5, right: 10, bottom: 20, left: 210},
    width = 800 - margin.left - margin.right,
    height = 50 - margin.top - margin.bottom;

var chart = d3.bullet()
    .width(width)
    .height(height);

d3.json("/templates/bullets.json", function(error, data) {
  if (error) throw error;

  var svg = d3.select("#viz").selectAll("svg")
      .data(data)
    .enter().append("svg")
      .attr("class", "bullet")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
      .call(chart);

  var title = svg.append("g")
      .style("text-anchor", "end")
      .attr("transform", "translate(-6," + height / 2 + ")");

  title.append("text")
      .attr("class", "title")
      .text(function(d) { return d.title; });

  title.append("text")
      .attr("class", "subtitle")
      .attr("dy", "1em")
      .text(function(d) { return d.subtitle; });

	svg.datum(setvalues).call(chart.duration(1000));
});

</script>
